(function(t){function e(e){for(var s,r,o=e[0],l=e[1],u=e[2],p=0,d=[];p<o.length;p++)r=o[p],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);c&&c(e);while(d.length)d.shift()();return n.push.apply(n,u||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={index:0},n=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("0029")},"0029":function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("body",{staticClass:"full",attrs:{id:"body"}},[a("div",{attrs:{id:"content"}},[t.showBack?a("div",{attrs:{id:"back"},on:{click:t.back}},[a("img",{staticClass:"back-icon",attrs:{src:"img/back.png"}}),a("span",{staticClass:"back-text"},[t._v("Назад")])]):t._e(),a("router-view"),t._m(0)],1)])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"footer"}},[a("p",{staticClass:"footer-text block"},[a("span",[t._v("Created by")]),a("a",{staticClass:"link",attrs:{target:"_blank",href:"https://t.me/iamtaru"}},[t._v("Taru")])])])}],r={computed:{showBack:o},methods:{back:l},data:function(){return{}}};function o(){return!("Main"===this.$route.name)}function l(){this.$router.back()}var u=r,c=(a("ba21"),a("2877")),p=Object(c["a"])(u,i,n,!1,null,null,null),d=p.exports,v=a("8c4f"),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full",attrs:{id:"main"}},[t._l(t.menu,(function(e){return[a("router-link",{staticClass:"link",attrs:{tag:"div",to:e.url}},[a("p",{staticClass:"link-title"},[t._v(t._s(e.title))])])]}))],2)},m=[],h={computed:{menu:k}};function k(){return this.$store.state.menu}var b=h,w=(a("36a9"),Object(c["a"])(b,f,m,!1,null,null,null)),g=w.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block",attrs:{id:"page"}},[a("h1",{staticClass:"page-title"},[t._v("First page")]),a("div",{staticClass:"list"},[t._l(t.list,(function(e){return[a("Work",t._b({ref:"work",refInFor:!0,on:{remove:t.remove}},"Work",{work:e},!1))]})),a("div",{ref:"create",staticClass:"work add-work"},[a("span",{staticClass:"add-icon"},[t._v("+")]),a("span",{staticClass:"add-text"},[t._v("Создать")])])],2),t.confirm?a("div",{staticClass:"confirm full"},[a("div",{staticClass:"confirm-box"},[a("p",{staticClass:"confirm-text"},[t._v("Вы действительно хотите удалить")]),a("p",{staticClass:"confirm-work"},[t._v(t._s(t.confirm)),a("span",{staticClass:"confirm-ask"},[t._v("?")])]),a("div",{staticClass:"controls"},[a("button",t._b({staticClass:"button blue",on:{click:function(e){t.confirm=!1}}},"button",{disabled:t.disabled},!1),[a("span",[t._v("Сохранить")])]),a("button",t._b({staticClass:"button red",on:{click:t.trash}},"button",{disabled:t.disabled},!1),[a("span",[t._v("Удалить")])])])])]):t._e()])},y=[],_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"work",class:{visible:t.visible}},[a("img",{staticClass:"work-poster",attrs:{src:t.work.poster}}),a("p",{staticClass:"work-title"},[t._v(t._s(t.work.title.ru))]),a("div",{staticClass:"work-controls"},[a("div",{staticClass:"button",on:{click:t.edit}},[a("img",{staticClass:"button-icon",attrs:{src:"img/work/edit.png"}})]),a("div",{staticClass:"button",on:{click:t.remove}},[a("img",{staticClass:"button-icon",attrs:{src:"img/work/trash.png"}})])])])},$=[],x={props:["work"],computed:{index:I},methods:{edit:O,remove:P,show:j},data:function(){return{visible:!1}}};function I(){return 1}function O(){this.$router.push("/edit/"+this.index)}function P(){this.$emit("remove",this.index)}function j(){this.visible=!0}var E=x,N=(a("b375"),Object(c["a"])(E,_,$,!1,null,null,null)),L=N.exports,S={components:{Work:L},computed:{page:G},methods:{remove:M,trash:T},beforeMount:A,mounted:R,data:function(){return{temp:!1,disabled:!1,confirm:!1,list:this.list||[]}}};function G(){return this.$route.params.page}function M(t){this.confirm="Евдокия"}function T(){}async function A(){var t="first|second|third|fourth".split("|");return!1===t.includes(this.page)&&this.$router.push("/not-found"),this.list=await this.api("/list?parent="+this.page)}function R(){this.$watch("list",t=>{this.$refs.create.classList.contains("visible")&&this.$refs.create.classList.remove("visible"),t.length>0&&(this.$nextTick(()=>{this.$refs.work.forEach((t,e)=>{setTimeout(t.show,25*e)})}),setTimeout(()=>{this.$refs.create.classList.add("visible")},25*this.$refs.work.length))})}var V=S,D=(a("6b7d"),Object(c["a"])(V,C,y,!1,null,null,null)),U=D.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block",attrs:{id:"edit"}},[t.loaded?[a("h1",{staticClass:"title"},[t._v("Редактирование "+t._s(t.work.title.ru))]),a("InputTitle",{model:{value:t.work.title,callback:function(e){t.$set(t.work,"title",e)},expression:"work.title"}}),a("InputYear",{model:{value:t.work.year,callback:function(e){t.$set(t.work,"year",e)},expression:"work.year"}}),a("InputGenre",{model:{value:t.work.genres,callback:function(e){t.$set(t.work,"genres",e)},expression:"work.genres"}}),a("InputCountry",{model:{value:t.work.country,callback:function(e){t.$set(t.work,"country",e)},expression:"work.country"}}),a("InputGallery",{model:{value:t.work.gallery,callback:function(e){t.$set(t.work,"gallery",e)},expression:"work.gallery"}}),a("div",{staticClass:"label-flex"},[a("InputVideo",{model:{value:t.work.video,callback:function(e){t.$set(t.work,"video",e)},expression:"work.video"}}),a("InputPoster",{model:{value:t.work.poster,callback:function(e){t.$set(t.work,"poster",e)},expression:"work.poster"}})],1),a("InputMetas",{model:{value:t.work.metas,callback:function(e){t.$set(t.work,"metas",e)},expression:"work.metas"}}),a("InputActors",{model:{value:t.work.actors,callback:function(e){t.$set(t.work,"actors",e)},expression:"work.actors"}})]:t._e(),a("div",{staticClass:"save-div"},[t.disabled?a("button",{staticClass:"button wait"},[t._v("Подождите...")]):a("button",{staticClass:"button",on:{click:t.save}},[t._v("Сохранить")])])],2)},F=[],Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label"},[a("span",{staticClass:"label-text"},[t._v("Название:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.ru,expression:"input.ru"}],staticClass:"input",attrs:{placeholder:"На русском"},domProps:{value:t.input.ru},on:{input:function(e){e.target.composing||t.$set(t.input,"ru",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.en,expression:"input.en"}],staticClass:"input",attrs:{placeholder:"На английском"},domProps:{value:t.input.en},on:{input:function(e){e.target.composing||t.$set(t.input,"en",e.target.value)}}})])},W=[],q={props:["value"],mounted:B,data:function(){return{input:this.value||{en:"",ru:""}}}};function B(){this.$watch("input",t=>{this.$emit("input",t)})}var H=q,X=Object(c["a"])(H,Y,W,!1,null,null,null),z=X.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label"},[a("span",{staticClass:"label-text"},[t._v("Год:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"input",attrs:{placeholder:"Введите"},domProps:{value:t.input},on:{input:function(e){e.target.composing||(t.input=e.target.value)}}})])},Q=[],Z={props:["value"],mounted:tt,data:function(){return console.log(this.value),{input:this.value||""}}};function tt(){this.$watch("input",t=>{this.$emit("input",t)})}var et=Z,at=Object(c["a"])(et,K,Q,!1,null,null,null),st=at.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label"},[a("span",{staticClass:"label-text"},[t._v("Жанр:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.ru,expression:"input.ru"}],staticClass:"input",attrs:{placeholder:"На русском"},domProps:{value:t.input.ru},on:{input:function(e){e.target.composing||t.$set(t.input,"ru",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.en,expression:"input.en"}],staticClass:"input",attrs:{placeholder:"На английском"},domProps:{value:t.input.en},on:{input:function(e){e.target.composing||t.$set(t.input,"en",e.target.value)}}})])},nt=[],rt={props:["value"],mounted:ot,data:function(){return{input:this.value||{en:"",ru:""}}}};function ot(){this.$watch("input",t=>{this.$emit("input",t)})}var lt=rt,ut=Object(c["a"])(lt,it,nt,!1,null,null,null),ct=ut.exports,pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label"},[a("span",{staticClass:"label-text"},[t._v("Страна:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.ru,expression:"input.ru"}],staticClass:"input",attrs:{placeholder:"На русском"},domProps:{value:t.input.ru},on:{input:function(e){e.target.composing||t.$set(t.input,"ru",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.en,expression:"input.en"}],staticClass:"input",attrs:{placeholder:"На английском"},domProps:{value:t.input.en},on:{input:function(e){e.target.composing||t.$set(t.input,"en",e.target.value)}}})])},dt=[],vt={props:["value"],mounted:ft,data:function(){return{input:this.value||{en:"",ru:""}}}};function ft(){this.$watch("input",t=>{this.$emit("input",t)})}var mt=vt,ht=Object(c["a"])(mt,pt,dt,!1,null,null,null),kt=ht.exports,bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label"},[a("span",{staticClass:"label-text"},[t._v("Кадры из фильма:")]),a("div",{staticClass:"gallery"},[t._l(t.files,(function(e){return[a("div",{staticClass:"image-div",class:{delete:e.delete}},[a("img",{staticClass:"image",attrs:{src:e.src}}),a("div",{staticClass:"icon-div",on:{click:function(a){return t.toggle(e)}}},[e.delete?a("img",{staticClass:"icon",attrs:{src:"img/work/restore.png",title:"Вернуть"}}):a("img",{staticClass:"icon",attrs:{src:"img/work/trash.png",title:"Удалить"}})])])]})),a("div",{staticClass:"add-image",on:{click:t.upload}},[t._v("+")])],2)])},wt=[],gt={props:["value"],methods:{update:Ct,upload:yt,toggle:_t},data:function(){return{files:this.value||[]}}};function Ct(){this.files=[...this.files],this.$emit("input",this.files)}function yt(t){var e=$t();e.click(),e.addEventListener("change",()=>{for(let t=0;t!=e.files.length;++t){let a=e.files[t],s=URL.createObjectURL(a);this.files.push({id:Date.now().toString(36),created:!0,upload:!0,src:s,file:a})}return this.update()})}function _t(t){for(let e of this.files)if(e.id===t.id)return t.created&&(e.upload=!e.upload),e.delete=!e.delete,this.update()}function $t(){var t=document.createElement("input");return t.setAttribute("type","file"),t.setAttribute("accept","image/*"),t.setAttribute("multiple",!0),t}var xt=gt,It=(a("a709"),Object(c["a"])(xt,bt,wt,!1,null,null,null)),Ot=It.exports,Pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label"},[a("span",{staticClass:"label-text"},[t._v("Видео:")]),a("button",{staticClass:"upload-video",on:{click:t.upload}},[t._v("Загрузить видео")]),a("div",{staticClass:"video-div"},[a("video",{staticClass:"video",attrs:{src:t.video,controls:""}})])])},jt=[],Et={props:["value"],computed:{video:Nt},methods:{upload:Lt},data:function(){return{input:{upload:!1,file:!1,src:""}}}};function Nt(){return this.input.upload?this.input.src:this.value}function Lt(){var t=St();t.click(),t.addEventListener("change",()=>{var e=t.files[0],a=URL.createObjectURL(e);return this.input={file:e,src:a,upload:!0},this.$emit("input",this.input)})}function St(){var t=document.createElement("input");return t.setAttribute("type","file"),t.setAttribute("accept","video/*"),t}var Gt=Et,Mt=(a("ebd7"),Object(c["a"])(Gt,Pt,jt,!1,null,null,null)),Tt=Mt.exports,At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label"},[a("span",{staticClass:"label-text"},[t._v("Постер:")]),a("button",{staticClass:"upload-poster",on:{click:t.upload}},[t._v("Загрузить постер")]),a("div",{staticClass:"poster-div"},[a("img",{staticClass:"poster",attrs:{src:t.poster}})])])},Rt=[],Vt={props:["value"],computed:{poster:Dt},methods:{upload:Ut},data:function(){return{input:{upload:!1,file:!1,src:""}}}};function Dt(){return this.input.upload?this.input.src:this.value}function Ut(){var t=Jt();t.click(),t.addEventListener("change",()=>{var e=t.files[0],a=URL.createObjectURL(e);return this.input={file:e,src:a,upload:!0},this.$emit("input",this.input)})}function Jt(){var t=document.createElement("input");return t.setAttribute("type","file"),t.setAttribute("accept","image/*"),t}var Ft=Vt,Yt=(a("e85a"),Object(c["a"])(Ft,At,Rt,!1,null,null,null)),Wt=Yt.exports,qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label long"},[a("span",{staticClass:"label-text"},[t._v("Мета информация:")]),t._m(0),t._l(t.input,(function(e,s){return a("div",{staticClass:"metas-box"},[a("div",{staticClass:"side"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ru.key,expression:"meta.ru.key"}],staticClass:"meta-input",attrs:{placeholder:"Ключ"},domProps:{value:e.ru.key},on:{input:function(a){a.target.composing||t.$set(e.ru,"key",a.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.ru.value,expression:"meta.ru.value"}],staticClass:"meta-input value",attrs:{placeholder:"Значение"},domProps:{value:e.ru.value},on:{input:function(a){a.target.composing||t.$set(e.ru,"value",a.target.value)}}})]),a("div",{staticClass:"side"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.en.key,expression:"meta.en.key"}],staticClass:"meta-input",attrs:{placeholder:"Ключ"},domProps:{value:e.en.key},on:{input:function(a){a.target.composing||t.$set(e.en,"key",a.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.en.value,expression:"meta.en.value"}],staticClass:"meta-input value",attrs:{placeholder:"Значение"},domProps:{value:e.en.value},on:{input:function(a){a.target.composing||t.$set(e.en,"value",a.target.value)}}})]),a("img",{staticClass:"delete",attrs:{src:"img/work/trash.png"},on:{click:function(e){return t.remove(s)}}})])})),a("button",{staticClass:"button meta-button",on:{click:t.create}},[t._v("Добавить мета-информацию")])],2)},Bt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"metas-box first"},[a("div",{staticClass:"side"},[a("h3",{staticClass:"side-text"},[t._v("На русском")])]),a("div",{staticClass:"side"},[a("h3",{staticClass:"side-text"},[t._v("На английском")])])])}],Ht={props:["value"],methods:{create:Xt,remove:zt,update:Kt},data:function(){return{input:this.value||[]}}};function Xt(){var t="",e="";this.input.push({en:{key:t,value:e},ru:{key:t,value:e}}),this.update()}function zt(t){this.input.splice(t,1),this.update()}function Kt(){this.input=[...this.input],this.$emit("input",this.input)}var Qt=Ht,Zt=(a("43ba"),Object(c["a"])(Qt,qt,Bt,!1,null,null,null)),te=Zt.exports,ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label long"},[a("span",{staticClass:"label-text"},[t._v("Актёрский состав:")]),t._m(0),t._l(t.input,(function(e,s){return a("div",{staticClass:"metas-box"},[a("div",{staticClass:"side"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ru,expression:"meta.ru"}],staticClass:"meta-input actor",attrs:{placeholder:"Ключ"},domProps:{value:e.ru},on:{input:function(a){a.target.composing||t.$set(e,"ru",a.target.value)}}})]),a("div",{staticClass:"side"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.en,expression:"meta.en"}],staticClass:"meta-input actor",attrs:{placeholder:"Ключ"},domProps:{value:e.en},on:{input:function(a){a.target.composing||t.$set(e,"en",a.target.value)}}})]),a("img",{staticClass:"delete",attrs:{src:"img/work/trash.png"},on:{click:function(e){return t.remove(s)}}})])})),a("button",{staticClass:"button meta-button",on:{click:t.create}},[t._v("Добавить актёра")])],2)},ae=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"metas-box first"},[a("div",{staticClass:"side"},[a("h3",{staticClass:"side-text"},[t._v("На русском")])]),a("div",{staticClass:"side"},[a("h3",{staticClass:"side-text"},[t._v("На английском")])])])}],se={props:["value"],methods:{create:ie,remove:ne,update:re},data:function(){return{input:this.value||[]}}};function ie(){this.input.push({en:"",ru:""}),this.update()}function ne(t){this.input.splice(t,1),this.update()}function re(){this.input=[...this.input],this.$emit("input",this.input)}var oe=se,le=(a("030c"),Object(c["a"])(oe,ee,ae,!1,null,null,null)),ue=le.exports,ce={beforeCreate:pe,components:{InputTitle:z,InputYear:st,InputGenre:ct,InputCountry:kt,InputGallery:Ot,InputVideo:Tt,InputPoster:Wt,InputMetas:te,InputActors:ue},methods:{save:de,uploadData:ve,uploadVideo:fe,uploadPoster:me,uploadGallery:he,pushImage:ke,removeImage:be},data:function(){return{disabled:!1,loaded:!(void 0===this.work),work:this.work||this.$store.state.default}}};async function pe(){console.log(this.$route.params.index);var t=this.$route.params.index;this.work=await this.api("/get?id="+t),this.loaded=!0}async function de(){this.disabled=!0;var{metas:t,actors:e,year:a,genres:s,country:i,title:n}=this.work,r={metas:t,actors:e,year:a,genres:s,country:i,title:n};await this.uploadData(r),await this.uploadVideo(this.work.video),await this.uploadPoster(this.work.poster),await this.uploadGallery(this.work.gallery),this.disabled=!1}async function ve(t){await this.api("/edit?id="+this.work.id,t)}async function fe(t){t.upload&&await this.api.upload("/video?id="+this.work.id,t.file)}async function me(t){t.upload&&await this.api.upload("/poster?id="+this.work.id,t.file)}async function he(t){for(let e of t)e.created&&e.upload&&await this.pushImage(e.file),!e.created&&e.delete&&await this.removeImage(e.id)}async function ke(t){await this.api.upload("/push-gallery?id="+this.work.id,t)}async function be(t){await this.api(`/remove-gallery?id=${this.work.id}&img=${t}`)}var we=ce,ge=(a("2046"),Object(c["a"])(we,J,F,!1,null,null,null)),Ce=ge.exports,ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block",attrs:{id:"edit"}},[t.loaded?[a("h1",{staticClass:"title"},[t._v("Создание "+t._s(t.work.title.ru))]),a("InputTitle",{model:{value:t.work.title,callback:function(e){t.$set(t.work,"title",e)},expression:"work.title"}}),a("InputYear",{model:{value:t.work.year,callback:function(e){t.$set(t.work,"year",e)},expression:"work.year"}}),a("InputGenre",{model:{value:t.work.genres,callback:function(e){t.$set(t.work,"genres",e)},expression:"work.genres"}}),a("InputCountry",{model:{value:t.work.country,callback:function(e){t.$set(t.work,"country",e)},expression:"work.country"}}),a("InputGallery",{model:{value:t.work.gallery,callback:function(e){t.$set(t.work,"gallery",e)},expression:"work.gallery"}}),a("div",{staticClass:"label-flex"},[a("InputVideo",{model:{value:t.work.video,callback:function(e){t.$set(t.work,"video",e)},expression:"work.video"}}),a("InputPoster",{model:{value:t.work.poster,callback:function(e){t.$set(t.work,"poster",e)},expression:"work.poster"}})],1),a("InputMetas",{model:{value:t.work.metas,callback:function(e){t.$set(t.work,"metas",e)},expression:"work.metas"}}),a("InputActors",{model:{value:t.work.actors,callback:function(e){t.$set(t.work,"actors",e)},expression:"work.actors"}})]:t._e(),a("div",{staticClass:"save-div"},[t.disabled?a("button",{staticClass:"button wait"},[t._v("Подождите...")]):a("button",{staticClass:"button",on:{click:t.save}},[t._v("Сохранить")])])],2)},_e=[],$e={beforeCreate:xe,components:{InputTitle:z,InputYear:st,InputGenre:ct,InputCountry:kt,InputGallery:Ot,InputVideo:Tt,InputPoster:Wt,InputMetas:te,InputActors:ue},methods:{save:Ie,uploadData:Oe,uploadVideo:Pe,uploadPoster:je,uploadGallery:Ee,pushImage:Ne,removeImage:Le},data:function(){return{disabled:!1,loaded:!(void 0===this.work),work:this.$store.state.default}}};async function xe(){this.loaded=!0}async function Ie(){this.disabled=!0;var{metas:t,actors:e,year:a,genres:s,country:i,title:n}=this.work,r={metas:t,actors:e,year:a,genres:s,country:i,title:n},o=await this.uploadData(r);this.work.id=o.id,await this.uploadVideo(this.work.video),await this.uploadPoster(this.work.poster),await this.uploadGallery(this.work.gallery),this.disabled=!1}async function Oe(t){var e=this.$route.params.category;await this.api("/create?parent="+e,t)}async function Pe(t){t.upload&&await this.api.upload("/video?id="+this.work.id,t.file)}async function je(t){t.upload&&await this.api.upload("/poster?id="+this.work.id,t.file)}async function Ee(t){for(let e of t)e.created&&e.upload&&await this.pushImage(e.file),!e.created&&e.delete&&await this.removeImage(e.id)}async function Ne(t){await this.api.upload("/push-gallery?id="+this.work.id,t)}async function Le(t){await this.api(`/remove-gallery?id=${this.work.id}&img=${t}`)}var Se=$e,Ge=(a("86ff"),Object(c["a"])(Se,ye,_e,!1,null,null,null)),Me=Ge.exports,Te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",[t._v("404")])},Ae=[],Re={},Ve=Object(c["a"])(Re,Te,Ae,!1,null,null,null),De=Ve.exports,Ue=Je();function Je(){return s["a"].use(v["a"]),new v["a"]({base:"./",mode:"hash",routes:Fe()})}function Fe(){return[{path:"/",name:"Main",component:g},{path:"/page/:page",name:"Page",component:U},{path:"/edit/:index",name:"Edit",component:Ce},{path:"/work/create/:category",name:"Create",component:Me},{path:"/not-found",name:"Not Found",component:De},{path:"*",redirect:"/not-found"}]}var Ye=a("2f62"),We=qe();function qe(){const t=Be();return s["a"].use(Ye["a"]),new Ye["a"].Store(t)}function Be(){return{state:{menu:He(),default:Xe()},mutations:{},actions:{},modules:{}}}function He(){return[{title:"123123",url:"/page/first"},{title:"123123",url:"/page/second"},{title:"123123",url:"/page/third"},{title:"123123",url:"/page/fourth"}]}function Xe(){var t={en:"",ru:""};return{gallery:[],metas:[],actors:[],poster:"",video:"",year:"",genres:{...t},country:{...t},title:{...t}}}const ze={};var Ke={install:Qe};function Qe(t){t.prototype.api=Ze,t.prototype.api.upload=ta}function Ze(t,e={}){const a=aa(),s=JSON.stringify(e);return ze[a]=ea("POST",t),ze[a].setRequestHeader("content-type","application/json"),ze[a].send(s),new Promise(t=>{ze[a].addEventListener("loadend",e=>{var s=e.target.response,i=JSON.parse(s);return delete ze[a],t(i)})})}function ta(t,e){const a=aa(),s=new FormData;return ze[a]=ea("POST",t),s.append("file",e),ze[a].send(s),new Promise(t=>{ze[a].addEventListener("loadend",e=>{var s=e.target.response,i=JSON.parse(s);return delete ze[a],t(i)})})}function ea(t,e){const a=new XMLHttpRequest;return a.open(t,e,!0),a}function aa(){var t=Date.now();return t.toString(36)}s["a"].use(Ke),new s["a"]({router:Ue,store:We,render:t=>t(d)}).$mount("#body")},"030c":function(t,e,a){"use strict";var s=a("cc4f"),i=a.n(s);i.a},2046:function(t,e,a){"use strict";var s=a("e483"),i=a.n(s);i.a},"20be":function(t,e,a){},"36a9":function(t,e,a){"use strict";var s=a("663b"),i=a.n(s);i.a},"43ba":function(t,e,a){"use strict";var s=a("e6c2"),i=a.n(s);i.a},"45a3":function(t,e,a){},"5c74":function(t,e,a){},"663b":function(t,e,a){},"6b7d":function(t,e,a){"use strict";var s=a("5c74"),i=a.n(s);i.a},"86ff":function(t,e,a){"use strict";var s=a("20be"),i=a.n(s);i.a},"87d3":function(t,e,a){},"8aa1":function(t,e,a){},a709:function(t,e,a){"use strict";var s=a("a804"),i=a.n(s);i.a},a804:function(t,e,a){},b375:function(t,e,a){"use strict";var s=a("d13f"),i=a.n(s);i.a},ba21:function(t,e,a){"use strict";var s=a("45a3"),i=a.n(s);i.a},cc4f:function(t,e,a){},d13f:function(t,e,a){},e483:function(t,e,a){},e6c2:function(t,e,a){},e85a:function(t,e,a){"use strict";var s=a("8aa1"),i=a.n(s);i.a},ebd7:function(t,e,a){"use strict";var s=a("87d3"),i=a.n(s);i.a}});